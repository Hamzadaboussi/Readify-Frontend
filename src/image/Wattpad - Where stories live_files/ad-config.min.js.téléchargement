var __adConfig=function(){function u(e){return e.split("-")[0]}function r(e,t){var n=_.get(wattpad,"testGroups.GDPR_ADS_EXPERIENCE",!1),d=_.get(wattpad,"testGroups.EXCLUDE_PREBID_PARTNERS",!1),i=wattpad&&wattpad.utils?wattpad.utils.getDeviceType():"",a=_.get(wattpad,"userCountryCode","");return function(e,t){var n=wattpad.utils.getIxPrebidSizes(t),d=[{gdprEnabled:!0,exclude:{},config:{bidder:"rubicon",params:{accountId:7941,siteId:346974,zoneId:t.rubiconZone}}},{gdprEnabled:!0,exclude:{desktop:["AE"],mobile:["SA"]},config:{bidder:"pubmatic",params:{publisherId:"159971",adSlot:t.pubmaticSlot.toString()}}},{gdprEnabled:!0,exclude:{desktop:["BR","IN","TR"]},config:{bidder:"criteo",params:{networkId:10933}}},{gdprEnabled:!0,exclude:{},config:{bidder:"triplelift",params:{inventoryCode:t.tripleliftInvCode}}},{gdprEnabled:!0,exclude:{desktop:["IN","AR","PL"],mobile:["PL","CL"]},config:{bidder:"openx",params:{unit:t.openXUnitId,delDomain:"wattpad-d.openx.net"}}},{gdprEnabled:!1,exclude:{desktop:["IN"],mobile:[]},config:{bidder:"sovrn",params:{tagid:t.sovrnTag.toString()}}},{gdprEnabled:!1,exclude:{desktop:["BR","IN","TR","AR","AE"],mobile:["CL","SA"]},config:{bidder:"districtmDMX",params:{memberid:100301,dmxid:t.dmxId}}},{gdprEnabled:!1,exclude:{desktop:["AE"],mobile:[]},config:{bidder:"onemobile",params:{dcn:"8a9690f1017575bc3e53bd52ec5100bc",pos:e}}},{gdprEnabled:!0,exclude:{},config:{bidder:"appnexus",params:{placementId:t.appnexusPlacementId}}},{gdprEnabled:!0,exclude:{},config:{bidder:"sharethrough",params:{pkey:t.sharethroughPKey}}}];return n.forEach(function(e){d.push({gdprEnabled:!1,exclude:{},config:e})}),d}(e,t).reduce(function(e,t){return function(e){return!n||e.gdprEnabled}(t)&&!function(e){var t=e.exclude[i]||[];return d&&t.includes(a)}(t)&&function(e){return!e.onlyInCountry||e.onlyInCountry.includes(a)}(t)&&e.push(t.config),e},[])}var o,t=wattpad.adzerkHeaderBiddingUnitMap,s=function(e){if(t.hasOwnProperty(e))return t[e]},p=window.IntersectionObserver&&window.IntersectionObserverEntry&&window.IntersectionObserverEntry.prototype&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;p&&(o=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(e.target.classList.contains("loaded")||(e.target.classList.add("loaded"),t.unobserve(e.target),c(e.target.getAttribute("id"))))})},{rootMargin:"0px 0px",root:null,threshold:0}));function e(e){if(null!==e.detail){var t=e.detail.shouldDelayAds,n=e.detail.shouldShowAds,d=t||!n,i=e.detail.lazyLoadAd,a=document.getElementById(e.detail.adUnitId);a?d?wattpad.utils.generateAndRenderHardcodedCreative(e.detail.adUnitId):i&&p?o.observe(a):a.classList.contains("hasRun")?console.warn("auction already ran on adUnitId: "+e.detail.adUnitId):(a.classList.add("hasRun"),c(e.detail.adUnitId)):console.error("unable to find "+e.detail.adUnitId+" in the DOM")}else document.querySelectorAll(".advertisement.lazyAd").forEach(function(e){p?o.observe(document.getElementById(e.id)):c(e.id)})}var c=function(e){var t,n,d,i=_.get(wattpad,"testGroups.USE_PREBID",!1),a={placements:{}},r=u(e),o=wattpad.utils.getPlacementConfiguration(r);if(a.placements[e]={zoneId:o.zone,htSlotName:r},app&&app.currentView&&(n=(t=app.currentView.model.attributes).group?t.group:t,d=t.group?t:void 0),i)wattpad.utils.loadHbAdPrebid(a);else{var s={siteId:1025452,networkId:9660,adTypes:Object.keys(_.get(o,"sizes",{})).map(function(e){return parseInt(e,10)}),targeting:wattpad.utils.getAdzerkTargeting(n,d,wattpad.utils.currentUser().toJSON()||{})};_.merge(a.placements[e],s),wattpad.utils.loadHbAd(a)}};return window.addEventListener("ad-available",e),{getPrebidAdUnits:function(e){var a=[];return e.forEach(function(e){var t=u(e),n=function(e){var t=s(e);return t?Object.values(t.sizes):[]}(t),d=s(t),i={code:e,mediaTypes:{banner:{sizes:n}},bids:r(t,d)};a.push(i)}),a},configurePrebid:function(e){if(e&&e.getEvents&&0===e.getEvents().length){var t=[{name:"criteo"},{name:"pubCommonId",storage:{type:"cookie",name:"_pubcid",expires:365}}],n=n||window.PWT||{};if(n&&n.getUserIds){var d=n.getUserIds();d.tdid&&t.push({name:"unifiedId",value:{tdid:d.tdid}})}e.onEvent("bidResponse",function(e){var t=wattpad.utils.normalizeBids([e],wattpad.utils.getBidFormat("prebid"))[0];if("undefined"!=typeof __atha){var n=__atha.sendBid(e.adUnitCode,_.get(t,"partner","unknown"),_.get(t,"bic",void 0),t.dimensions);e.id=n}});var i={consentManagement:{usp:{cmpApi:"iab",timeout:100}},userSync:{userIds:t,filterSettings:{iframe:{bidders:"*",filter:"include"}}}};_.get(window,"wattpad.testGroups.GDPR_ADS_EXPERIENCE",!1)&&(i.consentManagement.gdpr={cmpApi:"iab",timeout:8e3,defaultGdprScope:!0}),e.setConfig(i)}},getAdCommentFromPrebidBid:function(e){return wattpad.utils.sprintf("p:%s c:%s m:%s",[e.bidder,e.creativeId,JSON.stringify(e.meta)])}}}();"undefined"!=typeof module&&(module.exports=__adConfig);
//# sourceMappingURL=ad-config.min.js.map
